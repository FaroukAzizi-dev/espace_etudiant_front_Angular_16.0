<!-- internshipofferlist.component.html -->
<div class="internship-container">
  <div class="internship-container">
  <h2>Internship Opportunities</h2>
  
  <!-- Enhanced Search Bar -->
  <div class="search-container">
    <div class="search-box">
      <input type="text" [(ngModel)]="searchTerm" 
             placeholder="Search for internships..." 
             (keyup.enter)="searchTerm = searchTerm.trim()">
      <button class="search-icon" (click)="searchTerm = searchTerm.trim()">
        <i class="fas fa-search"></i>
      </button>
      <button class="advanced-toggle" (click)="toggleAdvancedSearch()">
        {{ advancedSearch ? 'Basic Search' : 'Advanced Search' }}
      </button>
      <button *ngIf="searchTerm" class="clear-search" (click)="resetSearch()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- Advanced Search Options -->
    <div *ngIf="advancedSearch" class="advanced-options">
      <div class="search-fields">
        <label>
          <input type="checkbox" [(ngModel)]="searchFields.title"> Title
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="searchFields.company"> Company
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="searchFields.description"> Description
        </label>
        <label>
          <input type="checkbox" [(ngModel)]="searchFields.requirements"> Requirements
        </label>
      </div>
      <div class="search-info">
        Showing {{filteredOffers.length}} of {{offers.length}} offers
      </div>
    </div>
  </div>

  
  <div *ngIf="!loading && !error" class="offers-list">
    <div *ngFor="let offer of filteredOffers" class="offer-card" (click)="toggleDescription(offer.id)">
      <div class="offer-header">
        <h3>{{ offer.title }}</h3>
        <span *ngIf="offer.company" class="company">
          {{ offer.company }}
        </span>
      </div>
      
      <div class="offer-details">
        <span *ngIf="offer.duration" class="duration">
          {{ offer.duration }}
        </span>
        <span *ngIf="offer.remuneration" class="remuneration">
          {{ offer.remuneration }}
        </span>
      </div>
      
      <p class="description" [class.expanded]="isExpanded(offer.id)">
        {{ stripHtml(offer.description) }}
        <span *ngIf="!isExpanded(offer.id) && stripHtml(offer.description).length > 160">...</span>
      </p>
      
      <div class="offer-footer" (click)="$event.stopPropagation()">
        <span *ngIf="offer.deadline" class="deadline">
          Apply by: {{ formatDate(offer.deadline) }}
        </span>
        <button *ngIf="offer.lien" class="apply-button" (click)="openGoogleForm(offer.lien)">
          Apply Now
        </button>
      </div>
    </div>
  </div>
</div>