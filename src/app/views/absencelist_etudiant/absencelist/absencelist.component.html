<!-- absencelist.component.html -->
<div class="absence-container">
  <div class="absence-card">
    <!-- Header -->
    <div class="absence-header">
      <h1 class="header-title">Mes Absences</h1>
      <p class="header-subtitle">
        Liste de toutes mes absences • 
        <span *ngIf="!isLoading && !error">
          {{ absences.length }} {{ absences.length > 1 ? 'enregistrements' : 'enregistrement' }}
        </span>
      </p>
    </div>

    <!-- Content -->
    <div class="absence-content fade-in">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <mat-spinner class="loading-spinner" [diameter]="50" color="primary"></mat-spinner>
        <p class="loading-text">Chargement des absences...</p>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !isLoading" class="error-state">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <p class="error-text">{{ error }}</p>
        <button class="error-button" (click)="refresh()">
          <mat-icon>refresh</mat-icon>
          Réessayer
        </button>
      </div>

      <!-- Success Content -->
      <div *ngIf="!isLoading && !error">
        <!-- Empty State -->
        <div *ngIf="absences.length === 0" class="empty-state">
          <mat-icon class="empty-icon">sentiment_very_satisfied</mat-icon>
          <p class="empty-text">Aucune absence enregistrée</p>
        </div>

        <!-- Table -->
        <div *ngIf="absences.length > 0">
          <div class="table-wrapper">
            <table class="absence-table">
              <thead class="table-header">
                <tr>
                  <th class="header-cell">Date</th>
                  <th class="header-cell">Heure début</th>
                  <th class="header-cell">Heure fin</th>
                  <th class="header-cell">Statut</th>
                  <th class="header-cell">Motif</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let absence of absences" class="table-row">
                  <td class="table-cell date-cell">
                    <span class="date-badge">{{ absence.date }}</span>
                  </td>
                  <td class="table-cell">
                    <span class="time-badge">{{ absence.heure_debut || '--:--' }}</span>
                  </td>
                  <td class="table-cell">
                    <span class="time-badge">{{ absence.heure_fin || '--:--' }}</span>
                  </td>
                  <td class="table-cell">
                    <span 
                      [class]="absence.statut === 'justifiee' ? 'status-justified' : 'status-not-justified'">
                      {{ absence.statut === 'justifiee' ? 'Justifiée' : 'Non justifiée' }}
                    </span>
                  </td>
                  <td class="table-cell">
                    <span 
                      class="motif-text"
                      [class.empty-motif]="!absence.motif || absence.motif.trim() === ''">
                      {{ absence.motif && absence.motif.trim() !== '' ? absence.motif : 'Aucun motif spécifié' }}
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Refresh Button -->
          <div class="button-container">
            <button class="refresh-button" (click)="refresh()">
              Actualiser
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>